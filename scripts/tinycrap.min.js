const randomButtons=Array.from(document.getElementsByClassName("random--button"));let requestInProgress=!1;function loadRandomImage(){if(requestInProgress)return void console.log("Request is already in progress, skipping this click.");const randomImage=document.querySelector("#random--image");function handleAnimationEnd(){const xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(4===xhr.readyState)if(requestInProgress=!1,200===xhr.status){var parser,htmlDoc,newRandomImage=(new DOMParser).parseFromString(xhr.responseText,"text/html").querySelector("#random--image");document.querySelector("#random--image").outerHTML=newRandomImage.outerHTML}else{const smile=document.querySelector(".image--wrapper"),errorMessage=document.querySelector(".image--wrapper");smile.classList.add("is--hidden"),errorMessage.innerHTML+='<p id="error--message">Error loading the image. Please refresh the page.</p>',console.log("Error!")}},xhr.open("GET","loader.php",!0),xhr.send()}randomImage.classList.add("fade--out"),randomImage.addEventListener("animationend",handleAnimationEnd),requestInProgress=!0}randomButtons.forEach(button=>{button.addEventListener("click",e=>{e.preventDefault(),loadRandomImage()})});